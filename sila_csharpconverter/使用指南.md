# SiLA 2 ç‰¹æ€§è½¬æ¢å™¨ä½¿ç”¨æŒ‡å—

## ğŸ“– ç®€ä»‹

æœ¬å·¥å…·ç”¨äºå°† SiLA 2 ç‰¹æ€§å®šä¹‰ï¼ˆXML æ–‡ä»¶ï¼‰è½¬æ¢ä¸º Protocol Buffer (.proto) æ–‡ä»¶å’Œ C# ä»£ç ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒå‡†å¤‡

- .NET 8.0 SDK
- å¿…è¦çš„ NuGet åŒ…ï¼ˆé¡¹ç›®å·²é…ç½®ï¼‰

### 2. æ–‡ä»¶ç»“æ„

```
sila_csharp_converter/
â”œâ”€â”€ xslt/                # XML â†’ Proto è½¬æ¢å™¨
â”œâ”€â”€ protobuf/            # SiLA æ¡†æ¶ Proto å®šä¹‰
â”œâ”€â”€ schema/              # XML Schema éªŒè¯æ–‡ä»¶
â”œâ”€â”€ examples/            # ç¤ºä¾‹ XML æ–‡ä»¶
â”œâ”€â”€ SiLAConverter.cs     # è½¬æ¢å™¨ä¸»ç±»
â””â”€â”€ Program.cs           # æµ‹è¯•ç¤ºä¾‹
```

### 3. ä¸»è¦åŠŸèƒ½

#### ä»æ–‡ä»¶è½¬æ¢

```csharp
// å•ä¸ªæ–‡ä»¶è½¬æ¢ï¼šXML â†’ Proto â†’ C#
SiLAConverter.ConvertComplete("input.sila.xml", "output/");

// ä»…è½¬æ¢ä¸º Proto
SiLAConverter.ConvertXmlToProto("input.sila.xml", "output.proto");
```

#### ä»å†…å­˜è½¬æ¢ï¼ˆæ–°åŠŸèƒ½ï¼‰

```csharp
// å•ä¸ª XML å­—ç¬¦ä¸²è½¬æ¢
string xmlContent = File.ReadAllText("feature.sila.xml");
string protoResult = SiLAConverter.ConvertXmlStringToProto(xmlContent);

// å¤šä¸ª XML å­—ç¬¦ä¸²æ‰¹é‡è½¬æ¢
var xmlDict = new Dictionary<string, string>
{
    ["Feature1"] = xml1Content,
    ["Feature2"] = xml2Content
};
var results = SiLAConverter.ConvertXmlStringsToProto(xmlDict);
```

## ğŸ“ API è¯´æ˜

### æ ¸å¿ƒæ–¹æ³•

| æ–¹æ³• | è¯´æ˜ |
|------|------|
| `ConvertXmlToProto(xmlPath, protoPath)` | ä»æ–‡ä»¶è½¬æ¢ XML â†’ Proto |
| `ConvertXmlStringToProto(xmlString)` | ä»å†…å­˜å­—ç¬¦ä¸²è½¬æ¢ |
| `ConvertXmlStringsToProto(xmlDict)` | æ‰¹é‡ä»å†…å­˜è½¬æ¢ |
| `CompileProtoToCSharp(protoPath, outputDir)` | ç¼–è¯‘ Proto â†’ C# |
| `ConvertComplete(xmlPath, outputDir)` | å®Œæ•´æµç¨‹ï¼šXML â†’ Proto â†’ C# |

### è½¬æ¢æµç¨‹

```
XML æ–‡ä»¶/å­—ç¬¦ä¸² â†’ [XSLT] â†’ Proto æ–‡ä»¶ â†’ [protoc] â†’ C# ä»£ç 
```

## ğŸ”§ å¸¸è§é—®é¢˜

**Q: æ‰¾ä¸åˆ° XSLT æ–‡ä»¶ï¼Ÿ**
A: ç¡®ä¿ xslt æ–‡ä»¶å¤¹åœ¨ç¨‹åºè¿è¡Œç›®å½•ã€‚

**Q: Proto ç¼–è¯‘å¤±è´¥ï¼Ÿ**
A: æ£€æŸ¥æ˜¯å¦å®‰è£…äº† Grpc.Tools NuGet åŒ…ã€‚

**Q: å¦‚ä½•éªŒè¯ XML æ ¼å¼ï¼Ÿ**
A: ä½¿ç”¨ `SiLAConverter.ValidateXml(xmlPath)` æ–¹æ³•ã€‚

## ğŸ“¦ è¾“å‡ºè¯´æ˜

### Proto æ–‡ä»¶ç»“æ„
- Package: `sila2.<originator>.<category>.<feature>.v<version>`
- Service: åŒ…å«æ‰€æœ‰å‘½ä»¤å’Œå±æ€§çš„ gRPC æœåŠ¡å®šä¹‰
- Messages: å‚æ•°å’Œå“åº”æ¶ˆæ¯å®šä¹‰

### C# æ–‡ä»¶
- `<Feature>.cs`: æ¶ˆæ¯ç±»å®šä¹‰
- `<Feature>Grpc.cs`: gRPC å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨å­˜æ ¹

## ğŸ“š å‚è€ƒèµ„æº

- [SiLA æ ‡å‡†å®˜ç½‘](https://sila-standard.com/)
- [SiLA GitLab](https://gitlab.com/SiLA2/sila_base)
- [gRPC C# æ–‡æ¡£](https://grpc.io/docs/languages/csharp/)

